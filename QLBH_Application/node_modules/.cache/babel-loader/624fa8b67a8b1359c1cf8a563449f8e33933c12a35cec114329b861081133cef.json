{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport pageheader from \"@/components/page-header.vue\";\nexport default {\n  name: \"PRODUCT\",\n  components: {\n    pageheader\n  },\n  data() {\n    return {\n      headersTable: [{\n        title: 'Mã sản phẩm',\n        value: 'id',\n        sortable: true\n      }, {\n        title: 'Tên sản phẩm',\n        value: 'name',\n        sortable: true\n      }, {\n        title: 'Loại sản phẩm',\n        value: 'productTypeName',\n        sortable: true\n      }, {\n        title: 'Giá',\n        value: 'price',\n        sortable: true\n      }, {\n        title: 'Hành đồng',\n        value: 'actions',\n        sortable: false\n      }],\n      viewdialogEdit: false,\n      titleDialog: null,\n      selectProduct: {\n        id: 0,\n        name: null,\n        price: null,\n        productTypeId: null,\n        warrantyPeriod: null,\n        infoProduct: [{\n          id: 0,\n          name: null,\n          describe: null\n        }],\n        img: []\n      },\n      previewUrls: [],\n      productTypeData: []\n    };\n  },\n  created() {\n    this.GetProductType();\n  },\n  methods: {\n    GetProductType() {\n      this.$apiClient.get(`/ProductType/GetAll`).then(response => {\n        this.productTypeData = response.data;\n        this.viewdialog = false;\n      }).catch(error => {\n        //this.$notify(error.response.data.Message??\"Đã xảy ra lỗi\",error.response.data.Errors.join('. ')?? \" \",\"error\");\n      });\n    },\n    createEditProduct(id) {\n      if (id === 0) {\n        this.titleDialog = 'Thêm sản phẩm';\n        this.selectProduct = {\n          id: 0,\n          name: null,\n          price: null,\n          productTypeId: null,\n          warrantyPeriod: null,\n          infoProduct: [{\n            id: 0,\n            name: null,\n            describe: null\n          }],\n          img: []\n        };\n      }\n    },\n    handleFileChange() {\n      this.previewUrls = [];\n      if (this.selectProduct.img) {\n        for (let file of this.selectProduct.img) {\n          const reader = new FileReader();\n          reader.onload = e => {\n            this.previewUrls.push(e.target.result);\n          };\n          reader.readAsDataURL(file);\n        }\n        console.log(this.previewUrls);\n      }\n    },\n    async loadImages() {\n      this.selectRoom.imgRoom = [];\n      for (let url of this.selectRoom.pathImgRoom) {\n        try {\n          const response = await fetch(url);\n          const blob = await response.blob(); // Chuyển phản hồi thành Blob\n          const file = new File([blob], url.split('/').pop(), {\n            type: blob.type\n          }); // Tạo File từ Blob\n          // Lưu vào mảng imgRoom\n          this.selectRoom.imgRoom.push(file);\n          console.log(`Ảnh từ ${url} đã được tải và lưu vào imgRoom.`);\n        } catch (error) {\n          console.error(`Lỗi khi tải ảnh từ ${url}:`, error);\n        }\n      }\n      console.log('Tất cả ảnh đã được tải:', this.selectRoom.imgRoom);\n    },\n    DeleteInfoProduct(index) {\n      this.selectProduct.infoProduct.splice(index, 1);\n    },\n    AddInfoProduct() {\n      this.selectProduct.infoProduct.push({\n        id: 0,\n        name: null,\n        describe: null\n      });\n    }\n  }\n};","map":{"version":3,"names":["pageheader","name","components","data","headersTable","title","value","sortable","viewdialogEdit","titleDialog","selectProduct","id","price","productTypeId","warrantyPeriod","infoProduct","describe","img","previewUrls","productTypeData","created","GetProductType","methods","$apiClient","get","then","response","viewdialog","catch","error","createEditProduct","handleFileChange","file","reader","FileReader","onload","e","push","target","result","readAsDataURL","console","log","loadImages","selectRoom","imgRoom","url","pathImgRoom","fetch","blob","File","split","pop","type","DeleteInfoProduct","index","splice","AddInfoProduct"],"sources":["D:\\Du_An\\BanHang_ThietBiDienThu\\QLBH_Application\\src\\views\\Manage\\Page\\Product.vue"],"sourcesContent":["<script>\r\n    import pageheader from \"@/components/page-header.vue\"\r\n    export default {\r\n        name: \"PRODUCT\",\r\n        components: {\r\n            pageheader\r\n        },\r\n        data(){\r\n            return{\r\n                headersTable:[\r\n                    {title: 'Mã sản phẩm', value: 'id',sortable: true},\r\n                    {title: 'Tên sản phẩm',value:'name',sortable: true},\r\n                    {title: 'Loại sản phẩm',value:'productTypeName',sortable: true},\r\n                    {title: 'Giá',value: 'price',sortable: true},\r\n                    {title: 'Hành đồng',value: 'actions',sortable: false}\r\n                ],\r\n                viewdialogEdit:false,\r\n                titleDialog: null,\r\n                selectProduct:{\r\n                    id: 0,\r\n                    name: null,\r\n                    price: null,\r\n                    productTypeId: null,\r\n                    warrantyPeriod: null,\r\n                    infoProduct:[\r\n                        { \r\n                            id: 0,\r\n                            name: null,\r\n                            describe: null,\r\n                        }\r\n                    ],\r\n                    img:[\r\n\r\n                    ]\r\n                },\r\n                previewUrls:[],\r\n                productTypeData:[]\r\n            }\r\n        },\r\n        created(){\r\n            this.GetProductType();\r\n        },\r\n        methods:{\r\n            GetProductType(){\r\n                this.$apiClient.get(`/ProductType/GetAll`)\r\n                        .then(response=>{\r\n                            this.productTypeData = response.data;\r\n                            this.viewdialog = false;\r\n                        })\r\n                        .catch(error=>{\r\n                            //this.$notify(error.response.data.Message??\"Đã xảy ra lỗi\",error.response.data.Errors.join('. ')?? \" \",\"error\");\r\n                        })\r\n            },\r\n            createEditProduct(id){\r\n                if(id === 0){\r\n                    this.titleDialog = 'Thêm sản phẩm'\r\n                    this.selectProduct = {\r\n                        id: 0,\r\n                        name: null,\r\n                        price: null,\r\n                        productTypeId: null,\r\n                        warrantyPeriod: null,\r\n                        infoProduct: [\r\n                        {\r\n                            id: 0,\r\n                            name: null,\r\n                            describe: null,\r\n                        },\r\n                        ],\r\n                        img: [],\r\n                    };\r\n                }\r\n            },\r\n            handleFileChange() {\r\n                this.previewUrls = [];\r\n                if (this.selectProduct.img) {\r\n                    for (let file of this.selectProduct.img) {\r\n                    const reader = new FileReader();\r\n                    reader.onload = (e) => {\r\n                        this.previewUrls.push(e.target.result);\r\n                    };\r\n                    reader.readAsDataURL(file);\r\n                    }\r\n                    console.log(this.previewUrls)\r\n                }\r\n            },\r\n            async loadImages(){\r\n                this.selectRoom.imgRoom = [];\r\n                for (let url of this.selectRoom.pathImgRoom) {\r\n                    try {\r\n                    \r\n                        const response = await fetch(url);\r\n                        \r\n                        const blob = await response.blob(); // Chuyển phản hồi thành Blob\r\n                        const file = new File([blob], url.split('/').pop(), { type: blob.type }); // Tạo File từ Blob\r\n                        // Lưu vào mảng imgRoom\r\n                    this.selectRoom.imgRoom.push(file);\r\n                        console.log(`Ảnh từ ${url} đã được tải và lưu vào imgRoom.`);\r\n                    } catch (error) {\r\n                        console.error(`Lỗi khi tải ảnh từ ${url}:`, error);\r\n                    }\r\n                }\r\n                console.log('Tất cả ảnh đã được tải:', this.selectRoom.imgRoom);\r\n            },\r\n            DeleteInfoProduct(index){\r\n                this.selectProduct.infoProduct.splice(index, 1);\r\n            },\r\n            AddInfoProduct(){\r\n                this.selectProduct.infoProduct.push({\r\n                    id: 0,\r\n                    name: null,\r\n                    describe: null\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<template>\r\n    <pageheader title=\"\" pageTitle=\"Sản phẩm\" />\r\n    <BCard>\r\n        <BCardBody class=\"p-0\">\r\n            <BRow>\r\n                <BCol class=\"col-sm-4 col-6\">\r\n                    <v-select\r\n                        clearable\r\n                        label=\"Loại sản phẩm\"\r\n                        :items=\"productTypeData\"\r\n                        item-title=\"name\"\r\n                        item-value=\"id\"\r\n                        v-model=\"searchStatusRoom\"\r\n                        variant=\"outlined\"\r\n                        hide-details>\r\n                    </v-select>\r\n                </BCol>\r\n                <Bcol class=\"col-sm-8 col-6\"><v-text-field label=\"Tên sản phẩm\" variant=\"outlined\" v-model=\"searchName\" clearable hide-details></v-text-field></Bcol>\r\n            </BRow>\r\n        </BCardBody>\r\n    </BCard>\r\n    <BCard no-body class=\"table-card p-sm-2\">\r\n        <BCardBody>\r\n            <BRow class=\"text-end pb-3\">\r\n                <BCol class=\"col-sm-10 col-6\"><v-btn color=\"blue-lighten-1\" class=\"mt-2\" @click=\"(viewdialogEdit = !viewdialogEdit) && (createEditProduct(0))\"> Thêm sản phẩm</v-btn></BCol>\r\n                <!-- <BCol class=\"col-sm-3 col-6\"><v-btn color=\"blue-lighten-1\" class=\"mt-2\"> Tính tiền Phòng</v-btn></BCol> -->\r\n            </BRow>\r\n            <v-data-table \r\n            :headers = \"headersTable\"\r\n                :items=\"filteredRooms\"\r\n                class=\"border-sm rounded-lg\">\r\n                <template v-slot:[`item.priceRoom`]=\"{ item }\">\r\n                    <!-- Hiển thị giá đã định dạng -->\r\n                    {{ FormatTablePrice(item.priceRoom) }}\r\n                </template>\r\n                <template v-slot:[`item.actions`]=\"{ item }\">\r\n                    <v-icon small @click=\"(viewdialogDetail = !viewdialogDetail)&& (DetailRoom(item.id))\" title=\"Xem chi tiết\">mdi-eye</v-icon>\r\n                    <v-icon class=\"ml-lg-3\" small @click=\"(viewdialogEdit = !viewdialogEdit) && (EditRoom(item.id,'Sửa phòng'))\" title=\"Sửa phòng\" >mdi-pencil-circle </v-icon>\r\n                    <v-icon class=\"ml-lg-3\" v-show=\"!item.customerName\" small @click=\"deleteRoom(item.id,item.numberOfRoom)\" title=\"Xoá phòng\" >mdi-delete-empty </v-icon>\r\n                </template>\r\n            </v-data-table>\r\n        </BCardBody>\r\n    </BCard>\r\n    <BModal v-model=\"viewdialogEdit\" hide-footer :title=\"titleDialog\" modal-class=\"fadeInRight\"\r\n        class=\"v-modal-custom\" centered size=\"xl\" >\r\n        <div class=\"card-body\">\r\n            <v-form v-model=\"form\" ref=\"form\">\r\n                <BRow>\r\n                    <BCol class=\"col-lg-5\">\r\n                        <div class=\"form-group m-0\">\r\n                            <label class=\"form-label\">Tên sản phẩm:</label>\r\n                            <v-text-field v-model=\"selectProduct.name\" :rules=\"[rules.required]\" variant=\"outlined\" clearable placeholder=\"Nhập vào tên sản phẩm\" class=\"input-control\"></v-text-field>\r\n                        </div>\r\n                        <div class=\"form-group m-0\">\r\n                            <label class=\"form-label\">Giá:</label>\r\n                            <v-text-field v-model=\"selectProduct.price\" :rules=\"[rules.required]\" type=\"text\" variant=\"outlined\" clearable placeholder=\"Nhập vào giá của sản phẩm\" class=\"input-control\"></v-text-field>\r\n                        </div>\r\n                        <div class=\"form-group m-0\">\r\n                            <label class=\"form-label\">Loại sản phẩm:</label>\r\n                            <v-select\r\n                                clearable\r\n                                :items=\"productTypeData\"\r\n                                item-title=\"name\"\r\n                                item-value=\"id\"\r\n                                v-model=\"selectProduct.productTypeId\"\r\n                                variant=\"outlined\">\r\n                            </v-select>\r\n                        </div>\r\n                        <div class=\"form-group m-0\">\r\n                            <label class=\"form-label\">Thời gian bảo hành:</label>\r\n                            <BRow>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <v-select\r\n                                        clearable\r\n                                        label=\"Thời gian\"\r\n                                        :items=[1,2,3,4,5,6,7,8,9,10,11,12]\r\n                                        v-model=\"searchStatusRoom\"\r\n                                        variant=\"outlined\">\r\n                                    </v-select>\r\n                                </BCol>\r\n                                <BCol class=\"col-lg-6\">\r\n                                    <v-select\r\n                                        clearable\r\n                                        label=\"Đơn vị tính\"\r\n                                        :items=\"['Năm','Tháng']\"\r\n                                        v-model=\"searchStatusRoom\"\r\n                                        variant=\"outlined\">\r\n                                    </v-select>\r\n                                </BCol>\r\n                            </BRow>\r\n                        </div>\r\n                    </BCol>\r\n                    <BCol class=\"col-lg-7\">\r\n                        <div v-for=\"(info, index) in selectProduct.infoProduct\" :key=\"index\">\r\n                            <div class=\"form-group m-0\">\r\n                                <label class=\"form-label d-flex justify-content-between align-items-center\">\r\n                                    Thông tin số {{ index + 1 }} sản phẩm:\r\n                                    <BButton v-if=\"index != 0\" class=\"py-0\" type=\"button\" variant=\"primary\" @click=\"DeleteInfoProduct(index)\" >Xoá</BButton>\r\n                                </label>\r\n                                <BRow>\r\n                                    <BCol class=\"col-lg-4\">\r\n                                        <v-text-field v-model=\"info.name\"  label=\"Tên thông số\" :rules=\"[rules.required]\" type=\"text\" variant=\"outlined\" clearable placeholder=\"Nhập vào tên của thống số\" class=\"input-control\"></v-text-field>\r\n                                    </BCol>\r\n                                    <BCol class=\"col-lg-8\">\r\n                                        <v-text-field v-model=\"info.describe\"  label=\"Mô tả\" :rules=\"[rules.required]\" type=\"text\" variant=\"outlined\" clearable placeholder=\"Nhập vào mô tả của thống số\" class=\"input-control\"></v-text-field>\r\n                                    </BCol>\r\n                                </BRow>\r\n                            </div>\r\n                        </div>\r\n                        <BButton type=\"button\" variant=\"primary\" @click=\"AddInfoProduct(index)\" >Thêm thông số</BButton>\r\n                    </BCol>\r\n                    <BCol class=\"col-lg-12\">\r\n                        <div class=\"form-group\">\r\n                            <label class=\"form-label\">Ảnh sản phẩm:</label>\r\n                            <v-file-input\r\n                                v-model=\"selectProduct.img\"\r\n                                multiple\r\n                                accept=\"image/*\"\r\n                                show-size\r\n                                @change=\"handleFileChange\"\r\n                            ></v-file-input>\r\n                        </div>\r\n                    </BCol>\r\n                    <v-row>\r\n                        <v-col\r\n                            v-for=\"(file, index) in selectProduct.img\"\r\n                            :key=\"index\"\r\n                            cols=\"12\"\r\n                            sm=\"6\"\r\n                            md=\"3\"\r\n                        >\r\n                            <v-img\r\n                                :src=\"previewUrls?.[index] || selectProduct?.pathImg?.[index]\"\r\n                                aspect-ratio=\"1\"\r\n                                class=\"mb-4\"\r\n                            ></v-img>\r\n                            <p>{{ file.name }}</p>\r\n                        </v-col>\r\n                    </v-row>\r\n                </BRow>\r\n            </v-form>\r\n        </div>\r\n        <div class=\"modal-footer v-modal-footer\">\r\n            <BButton type=\"button\" variant=\"light\" @click=\"viewdialogEdit = false\">Close\r\n            </BButton>\r\n            <BButton type=\"button\" variant=\"primary\" @click=\"createEditProduct()\" :disabled=\"!form\">Save Changes</BButton>\r\n        </div>\r\n    </BModal>\r\n</template>"],"mappings":";AACI,OAAOA,UAAS,MAAO,8BAA6B;AACpD,eAAe;EACXC,IAAI,EAAE,SAAS;EACfC,UAAU,EAAE;IACRF;EACJ,CAAC;EACDG,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,YAAY,EAAC,CACT;QAACC,KAAK,EAAE,aAAa;QAAEC,KAAK,EAAE,IAAI;QAACC,QAAQ,EAAE;MAAI,CAAC,EAClD;QAACF,KAAK,EAAE,cAAc;QAACC,KAAK,EAAC,MAAM;QAACC,QAAQ,EAAE;MAAI,CAAC,EACnD;QAACF,KAAK,EAAE,eAAe;QAACC,KAAK,EAAC,iBAAiB;QAACC,QAAQ,EAAE;MAAI,CAAC,EAC/D;QAACF,KAAK,EAAE,KAAK;QAACC,KAAK,EAAE,OAAO;QAACC,QAAQ,EAAE;MAAI,CAAC,EAC5C;QAACF,KAAK,EAAE,WAAW;QAACC,KAAK,EAAE,SAAS;QAACC,QAAQ,EAAE;MAAK,EACvD;MACDC,cAAc,EAAC,KAAK;MACpBC,WAAW,EAAE,IAAI;MACjBC,aAAa,EAAC;QACVC,EAAE,EAAE,CAAC;QACLV,IAAI,EAAE,IAAI;QACVW,KAAK,EAAE,IAAI;QACXC,aAAa,EAAE,IAAI;QACnBC,cAAc,EAAE,IAAI;QACpBC,WAAW,EAAC,CACR;UACIJ,EAAE,EAAE,CAAC;UACLV,IAAI,EAAE,IAAI;UACVe,QAAQ,EAAE;QACd,EACH;QACDC,GAAG,EAAC;MAGR,CAAC;MACDC,WAAW,EAAC,EAAE;MACdC,eAAe,EAAC;IACpB;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAE;IACL,IAAI,CAACC,cAAc,CAAC,CAAC;EACzB,CAAC;EACDC,OAAO,EAAC;IACJD,cAAcA,CAAA,EAAE;MACZ,IAAI,CAACE,UAAU,CAACC,GAAG,CAAC,qBAAqB,EAChCC,IAAI,CAACC,QAAQ,IAAE;QACZ,IAAI,CAACP,eAAc,GAAIO,QAAQ,CAACvB,IAAI;QACpC,IAAI,CAACwB,UAAS,GAAI,KAAK;MAC3B,CAAC,EACAC,KAAK,CAACC,KAAK,IAAE;QACV;MAAA,CACH;IACb,CAAC;IACDC,iBAAiBA,CAACnB,EAAE,EAAC;MACjB,IAAGA,EAAC,KAAM,CAAC,EAAC;QACR,IAAI,CAACF,WAAU,GAAI,eAAc;QACjC,IAAI,CAACC,aAAY,GAAI;UACjBC,EAAE,EAAE,CAAC;UACLV,IAAI,EAAE,IAAI;UACVW,KAAK,EAAE,IAAI;UACXC,aAAa,EAAE,IAAI;UACnBC,cAAc,EAAE,IAAI;UACpBC,WAAW,EAAE,CACb;YACIJ,EAAE,EAAE,CAAC;YACLV,IAAI,EAAE,IAAI;YACVe,QAAQ,EAAE;UACd,CAAC,CACA;UACDC,GAAG,EAAE;QACT,CAAC;MACL;IACJ,CAAC;IACDc,gBAAgBA,CAAA,EAAG;MACf,IAAI,CAACb,WAAU,GAAI,EAAE;MACrB,IAAI,IAAI,CAACR,aAAa,CAACO,GAAG,EAAE;QACxB,KAAK,IAAIe,IAAG,IAAK,IAAI,CAACtB,aAAa,CAACO,GAAG,EAAE;UACzC,MAAMgB,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;UAC/BD,MAAM,CAACE,MAAK,GAAKC,CAAC,IAAK;YACnB,IAAI,CAAClB,WAAW,CAACmB,IAAI,CAACD,CAAC,CAACE,MAAM,CAACC,MAAM,CAAC;UAC1C,CAAC;UACDN,MAAM,CAACO,aAAa,CAACR,IAAI,CAAC;QAC1B;QACAS,OAAO,CAACC,GAAG,CAAC,IAAI,CAACxB,WAAW;MAChC;IACJ,CAAC;IACD,MAAMyB,UAAUA,CAAA,EAAE;MACd,IAAI,CAACC,UAAU,CAACC,OAAM,GAAI,EAAE;MAC5B,KAAK,IAAIC,GAAE,IAAK,IAAI,CAACF,UAAU,CAACG,WAAW,EAAE;QACzC,IAAI;UAEA,MAAMrB,QAAO,GAAI,MAAMsB,KAAK,CAACF,GAAG,CAAC;UAEjC,MAAMG,IAAG,GAAI,MAAMvB,QAAQ,CAACuB,IAAI,CAAC,CAAC,EAAE;UACpC,MAAMjB,IAAG,GAAI,IAAIkB,IAAI,CAAC,CAACD,IAAI,CAAC,EAAEH,GAAG,CAACK,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,EAAE;YAAEC,IAAI,EAAEJ,IAAI,CAACI;UAAK,CAAC,CAAC,EAAE;UAC1E;UACJ,IAAI,CAACT,UAAU,CAACC,OAAO,CAACR,IAAI,CAACL,IAAI,CAAC;UAC9BS,OAAO,CAACC,GAAG,CAAC,UAAUI,GAAG,kCAAkC,CAAC;QAChE,EAAE,OAAOjB,KAAK,EAAE;UACZY,OAAO,CAACZ,KAAK,CAAC,sBAAsBiB,GAAG,GAAG,EAAEjB,KAAK,CAAC;QACtD;MACJ;MACAY,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE,IAAI,CAACE,UAAU,CAACC,OAAO,CAAC;IACnE,CAAC;IACDS,iBAAiBA,CAACC,KAAK,EAAC;MACpB,IAAI,CAAC7C,aAAa,CAACK,WAAW,CAACyC,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;IACnD,CAAC;IACDE,cAAcA,CAAA,EAAE;MACZ,IAAI,CAAC/C,aAAa,CAACK,WAAW,CAACsB,IAAI,CAAC;QAChC1B,EAAE,EAAE,CAAC;QACLV,IAAI,EAAE,IAAI;QACVe,QAAQ,EAAE;MACd,CAAC;IACL;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}