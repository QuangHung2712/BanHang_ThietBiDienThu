{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport pageheader from \"@/components/page-header.vue\";\nimport { VCurrencyField } from \"vue-currency-input\";\nexport default {\n  name: \"PRODUCT-LIST\",\n  components: {\n    pageheader\n  },\n  directives: {\n    currency: VCurrencyField\n  },\n  data() {\n    return {\n      arrange: [{\n        title: 'Mới nhất',\n        value: 1\n      }, {\n        title: 'Giá từ thấp đến cao',\n        value: 2\n      }, {\n        title: 'Giá từ cao đến thấp',\n        value: 3\n      }],\n      orderBy: null,\n      searchPrice: [0, 1000000],\n      productTypeData: [],\n      searchProductType: null,\n      productData: [],\n      offcanvasFilter: false\n    };\n  },\n  watch: {\n    // Theo dõi sự thay đổi của query parameter productName\n    '$route.query.productName': function (newValue) {\n      // Cập nhật giá trị của productName\n      // Gọi phương thức mỗi khi query thay đổi\n      this.GetProductType(newValue ?? \"\");\n      this.GetPriceProduct(newValue ?? \"\");\n      this.GetProduct(newValue ?? \"\");\n    }\n  },\n  computed: {\n    filteredProduct() {\n      let filtered = this.productData.filter(item => {\n        // Lọc theo loại sản phẩm\n        const matchesProductType = this.searchProductType ? item.productType === this.searchProductType : true;\n\n        // Lọc theo tên khách \n        const matchesPriceFrom = item.price >= this.searchPrice[0] && item.price <= this.searchPrice[1];\n        return matchesProductType && matchesPriceFrom;\n      });\n      if (this.orderBy == 2) {\n        return filtered.sort((a, b) => a.price - b.price);\n      } else if (this.orderBy == 3) {\n        return filtered.sort((a, b) => b.price - a.price);\n      }\n      return filtered;\n    },\n    formattedPriceTo: {\n      get() {\n        return this.$common.formatPrice(this.searchPrice[1]);\n      },\n      set(value) {\n        this.searchPrice[1] = this.$common.formatPrice(value);\n      }\n    },\n    formattedPriceFrom: {\n      get() {\n        return this.$common.formatPrice(this.searchPrice[0]);\n      },\n      set(value) {\n        this.searchPrice[0] = this.$common.formatPrice(value);\n      }\n    }\n  },\n  created() {\n    // var productName = this.$route.query.productName ?? \"\";\n    // this.GetProductType(productName);\n    // this.GetPriceProduct(productName);\n    // this.GetProduct(productName);\n  },\n  methods: {\n    GetProductType(productName) {\n      this.$apiClient.get(`/ProductType/GetProductTypeByName?name=${productName}`).then(response => {\n        this.productTypeData = response.data;\n      });\n    },\n    GetPriceProduct(productName) {\n      this.$apiClient.get(`/Product/GetPrice?name=${productName}`).then(response => {\n        this.searchPrice[0] = response.data.priceFrom;\n        this.searchPrice[1] = response.data.priceTo;\n      });\n    },\n    GetProduct(productName) {\n      this.$apiClient.get(`/Product/FindProduct?name=${productName}`).then(response => {\n        this.productData = response.data;\n      });\n    },\n    GotoDetail(id) {\n      const route = this.$router.resolve({\n        name: 'detail',\n        params: {\n          productId: id\n        }\n      });\n      window.open(route.href, '_blank');\n    }\n  }\n};","map":{"version":3,"names":["pageheader","VCurrencyField","name","components","directives","currency","data","arrange","title","value","orderBy","searchPrice","productTypeData","searchProductType","productData","offcanvasFilter","watch","$route.query.productName","newValue","GetProductType","GetPriceProduct","GetProduct","computed","filteredProduct","filtered","filter","item","matchesProductType","productType","matchesPriceFrom","price","sort","a","b","formattedPriceTo","get","$common","formatPrice","set","formattedPriceFrom","created","methods","productName","$apiClient","then","response","priceFrom","priceTo","GotoDetail","id","route","$router","resolve","params","productId","window","open","href"],"sources":["D:\\Du_An\\BanHang_ThietBiDienThu\\QLBH_Application\\src\\views\\SearchForProducts\\ListProduct.vue"],"sourcesContent":["<script>\r\n    import pageheader from \"@/components/page-header.vue\"\r\n    import { VCurrencyField } from \"vue-currency-input\";\r\n\r\n    export default {\r\n        name: \"PRODUCT-LIST\",\r\n        components: {\r\n            pageheader\r\n        },\r\n        directives: {\r\n            currency: VCurrencyField,\r\n        },\r\n        data(){\r\n            return{\r\n                arrange:[\r\n                    {title: 'Mới nhất', value: 1},\r\n                    {title: 'Giá từ thấp đến cao', value: 2},\r\n                    {title: 'Giá từ cao đến thấp', value: 3},\r\n                ],\r\n                orderBy: null,\r\n                searchPrice: [0,1000000],\r\n                productTypeData: [],\r\n                searchProductType: null,\r\n                productData:[\r\n\r\n                ],\r\n                offcanvasFilter:false\r\n            }\r\n        },\r\n        watch: {\r\n            // Theo dõi sự thay đổi của query parameter productName\r\n            '$route.query.productName': function(newValue) {\r\n                // Cập nhật giá trị của productName\r\n                // Gọi phương thức mỗi khi query thay đổi\r\n                this.GetProductType(newValue??\"\"); \r\n                this.GetPriceProduct(newValue??\"\");\r\n                this.GetProduct(newValue??\"\");\r\n            },\r\n        },\r\n        computed:{\r\n            filteredProduct() {\r\n                let filtered = this.productData.filter((item) => {\r\n                    // Lọc theo loại sản phẩm\r\n                    const matchesProductType = this.searchProductType\r\n                    ? item.productType === this.searchProductType\r\n                    : true;\r\n\r\n                    // Lọc theo tên khách \r\n                    const matchesPriceFrom = item.price >= this.searchPrice[0] && item.price <= this.searchPrice[1]\r\n\r\n                    return matchesProductType &&  matchesPriceFrom;\r\n                });\r\n                if(this.orderBy == 2){\r\n                    return filtered.sort((a, b) => a.price - b.price);\r\n                }\r\n                else if(this.orderBy == 3){\r\n                    return filtered.sort((a, b) => b.price - a.price);\r\n                }\r\n                return filtered;\r\n            },\r\n            formattedPriceTo: {\r\n                get() {\r\n                    return this.$common.formatPrice(this.searchPrice[1]) ;\r\n                },\r\n                set(value) {\r\n                    this.searchPrice[1] = this.$common.formatPrice(value);\r\n                },\r\n            },\r\n            formattedPriceFrom: {\r\n                get() {\r\n                    return this.$common.formatPrice(this.searchPrice[0]) ;\r\n                },\r\n                set(value) {\r\n                    this.searchPrice[0] = this.$common.formatPrice(value);\r\n                },\r\n            },\r\n        },\r\n        created(){\r\n            // var productName = this.$route.query.productName ?? \"\";\r\n            // this.GetProductType(productName);\r\n            // this.GetPriceProduct(productName);\r\n            // this.GetProduct(productName);\r\n        },\r\n        methods:{\r\n            GetProductType(productName){\r\n                this.$apiClient.get(`/ProductType/GetProductTypeByName?name=${productName}`)\r\n                        .then(response=>{\r\n                            this.productTypeData = response.data;\r\n                        })\r\n            },\r\n            GetPriceProduct(productName){\r\n                this.$apiClient.get(`/Product/GetPrice?name=${productName}`)\r\n                        .then(response=>{\r\n                            this.searchPrice[0] = response.data.priceFrom;\r\n                            this.searchPrice[1] = response.data.priceTo;\r\n                        })\r\n            },\r\n            GetProduct(productName){\r\n                this.$apiClient.get(`/Product/FindProduct?name=${productName}`)\r\n                        .then(response=>{\r\n                            this.productData = response.data;\r\n                        })\r\n            },\r\n            GotoDetail(id){\r\n                const route = this.$router.resolve({ name: 'detail', params: { productId: id } });\r\n                window.open(route.href, '_blank');\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<template>\r\n    <BRow>\r\n        <BCol class=\"col-xl-2 col-6\">\r\n            <pageheader title=\"\" pageTitle=\"Sản phẩm\" />\r\n        </BCol>\r\n        <BCol class=\"col-xl-3 p-3 d-none d-md-block\">\r\n            <v-autocomplete\r\n                clearable\r\n                label=\"Loại sản phẩm\"\r\n                :items=\"productTypeData\"\r\n                item-title=\"name\"\r\n                item-value=\"id\"\r\n                v-model=\"searchProductType\"\r\n                variant=\"outlined\"\r\n                hide-details>\r\n            </v-autocomplete>\r\n        </BCol>\r\n        <BCol class=\"col-xl-4 p-3 d-none d-md-block\">\r\n            <div class=\"form-group m-0\">\r\n                <label class=\"form-label\">Giá sản phẩm</label>\r\n                <v-range-slider\r\n                    v-model=\"searchPrice\"\r\n                    range\r\n                    :min=\"searchPrice[0]\"\r\n                    :max=\"searchPrice[1]\"\r\n                    step=\"1000\"\r\n                    color=\"primary\"\r\n                    hide-details\r\n                ></v-range-slider>\r\n                <BRow>\r\n                    <BCol class=\"col-6\">\r\n                        <v-text-field\r\n                            v-model=\"formattedPriceFrom\"\r\n                            v-currency\r\n                            currency=\"VND\"\r\n                            locale=\"vi-VN\"\r\n                            label=\"Từ\"\r\n                            hide-details\r\n                            suffix=\"VNĐ\"\r\n                        ></v-text-field>\r\n                    </BCol>\r\n                    <BCol class=\"col-6\">\r\n                        <v-text-field\r\n                            label=\"Đến\"\r\n                            v-model=\"formattedPriceTo\"\r\n                            :type=\"'text'\"\r\n                            hide-details\r\n                            suffix=\"VNĐ\"\r\n                        ></v-text-field>\r\n                    </BCol>\r\n                </BRow>\r\n            </div>\r\n        </BCol>\r\n        <BCol class=\"col-xl-3 p-3 d-none d-md-block\">\r\n            <v-select\r\n                clearable\r\n                label=\"Sắp xếp\"\r\n                :items=\"arrange\"\r\n                item-title=\"title\"\r\n                item-value=\"value\"\r\n                v-model=\"orderBy\"\r\n                variant=\"outlined\"\r\n                hide-details>\r\n            </v-select>\r\n        </BCol>\r\n        <BCol class=\"col-6 d-block d-md-none d-flex justify-center\">\r\n            <v-btn style=\"background-color: #326e51; color: white; border-radius: 10px;\" variant=\"primary\" @click=\"offcanvasFilter = true\" prepend-icon=\"mdi-menu\">Lọc</v-btn>\r\n        </BCol>\r\n    </BRow>\r\n    <BOffcanvas v-model=\"offcanvasFilter\" title=\"Lọc sản phẩm\" header-class=\"border-bottom\"\r\n    body-class=\"p-0 overflow-hidden\" footer-class=\"border-top p-3 text-center\" class=\"w-50\">\r\n        <div class=\"offcanvas-body\">\r\n            <h6>Some Title</h6>\r\n            <p class=\"mb-4\">\r\n                Some text as placeholder. In real life you can have the elements you have chosen.\r\n                Like,\r\n                text,\r\n                images, lists, etc.\r\n            </p>\r\n            <div class=\"dropdown mb-3 d-inline-block me-2\">\r\n                <button class=\"btn btn-light-secondary btn-sm dropdown-toggle\" type=\"button\"\r\n                    data-bs-toggle=\"dropdown\">\r\n                    Dropdown button\r\n                </button>\r\n                <ul class=\"dropdown-menu\">\r\n                    <li><a class=\"dropdown-item\" href=\"#\">Action</a></li>\r\n                    <li><a class=\"dropdown-item\" href=\"#\">Another action</a></li>\r\n                    <li><a class=\"dropdown-item\" href=\"#\">Something else here</a></li>\r\n                </ul>\r\n            </div>\r\n            <button class=\"btn btn-light-danger btn-sm\" data-bs-dismiss=\"offcanvas\"> Close </button>\r\n        </div>\r\n    </BOffcanvas>\r\n    <BRow style=\"min-height: 685px;\">\r\n        <div v-for=\"(item,index) in filteredProduct\" :key=\"index\" class=\"col-xl-3 col-12 p-2\">\r\n            <router-link @click=\"GotoDetail(item.id)\" target=\"_blank\">\r\n                <div class=\"d-flex w-100 justify-center\">\r\n                    <img :src=\"item.pathImg\" width=\"280\" height=\"280\" alt=\"\">\r\n                </div>\r\n                <div class=\"text-center mt-3\">\r\n                    <p style=\"font-size: 18px !important;\">{{ item.name }}</p>\r\n                    <h3 style=\"color: red;\">{{ item.price.toLocaleString(\"vi-vn\") }} VNĐ</h3>\r\n                </div>\r\n            </router-link>\r\n        </div>\r\n    </BRow>\r\n</template>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}